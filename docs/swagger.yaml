basePath: /api/v1
definitions:
  handlers.CreateAdminRequest:
    properties:
      email:
        type: string
      name:
        type: string
      password:
        minLength: 6
        type: string
    required:
    - email
    - name
    - password
    type: object
  models.AddBookToCollectionDTO:
    properties:
      book_id:
        type: string
    required:
    - book_id
    type: object
  models.AuthRequestDTO:
    properties:
      email:
        type: string
      name:
        type: string
      password:
        minLength: 6
        type: string
    required:
    - email
    - password
    type: object
  models.AuthResponseDTO:
    properties:
      message:
        type: string
      token:
        type: string
      user:
        $ref: '#/definitions/models.UserResponseDTO'
    type: object
  models.Book:
    properties:
      author:
        type: string
      categories:
        items:
          $ref: '#/definitions/models.Category'
        type: array
      copies_count:
        minimum: 0
        type: integer
      cover_url:
        type: string
      created_at:
        type: string
      description:
        type: string
      download_count:
        type: integer
      files:
        items:
          $ref: '#/definitions/models.BookFile'
        type: array
      id:
        type: string
      is_premium:
        type: boolean
      isbn:
        type: string
      language:
        type: string
      page_count:
        type: integer
      publication_year:
        maximum: 9999
        minimum: 0
        type: integer
      publisher:
        type: string
      rating:
        type: number
      rating_count:
        type: integer
      status:
        $ref: '#/definitions/models.BookStatus'
      title:
        type: string
      updated_at:
        type: string
      view_count:
        type: integer
    required:
    - author
    - title
    type: object
  models.BookFile:
    properties:
      book:
        $ref: '#/definitions/models.Book'
      book_id:
        type: string
      created_at:
        type: string
      file_name:
        type: string
      file_size:
        type: integer
      file_type:
        $ref: '#/definitions/models.FileType'
      id:
        type: string
      is_processed:
        type: boolean
      metadata:
        type: string
      mime_type:
        type: string
      original_name:
        type: string
      page_count:
        type: integer
      updated_at:
        type: string
    type: object
  models.BookStatus:
    enum:
    - draft
    - published
    - archived
    type: string
    x-enum-varnames:
    - BookStatusDraft
    - BookStatusPublished
    - BookStatusArchived
  models.Bookmark:
    properties:
      book_id:
        type: string
      created_at:
        type: string
      id:
        type: string
      label:
        type: string
      location:
        description: Может быть номером страницы, CFI для EPUB, и т.д.
        type: string
      user_id:
        type: string
    type: object
  models.Category:
    properties:
      children:
        items:
          $ref: '#/definitions/models.Category'
        type: array
      color:
        type: string
      created_at:
        type: string
      description:
        type: string
      icon:
        type: string
      id:
        type: string
      is_active:
        type: boolean
      name:
        type: string
      parent:
        $ref: '#/definitions/models.Category'
      parent_id:
        type: string
      slug:
        type: string
      sort_order:
        type: integer
      updated_at:
        type: string
    required:
    - name
    type: object
  models.Collection:
    properties:
      books:
        items:
          $ref: '#/definitions/models.Book'
        type: array
      created_at:
        type: string
      description:
        type: string
      id:
        type: string
      name:
        type: string
      updated_at:
        type: string
      user_id:
        type: string
    type: object
  models.CreateBookDTO:
    properties:
      author:
        type: string
      category_ids:
        items:
          type: string
        type: array
      copies_count:
        minimum: 0
        type: integer
      cover_url:
        type: string
      description:
        type: string
      is_premium:
        type: boolean
      isbn:
        type: string
      language:
        type: string
      page_count:
        type: integer
      publication_year:
        maximum: 9999
        minimum: 0
        type: integer
      publisher:
        type: string
      title:
        type: string
    required:
    - author
    - title
    type: object
  models.CreateBookmarkDTO:
    properties:
      book_id:
        type: string
      label:
        type: string
      location:
        type: string
    required:
    - book_id
    - location
    type: object
  models.CreateCollectionDTO:
    properties:
      description:
        type: string
      name:
        type: string
    required:
    - name
    type: object
  models.CreateReviewDTO:
    properties:
      body:
        type: string
      book_id:
        type: string
      rating:
        maximum: 5
        minimum: 1
        type: integer
      title:
        type: string
    required:
    - book_id
    - rating
    type: object
  models.ErrorResponseDTO:
    properties:
      error:
        type: string
      message:
        type: string
    type: object
  models.FileType:
    enum:
    - pdf
    - epub
    - mobi
    type: string
    x-enum-varnames:
    - FileTypePDF
    - FileTypeEPUB
    - FileTypeMOBI
  models.ListResponseDTO:
    properties:
      data: {}
      pagination:
        $ref: '#/definitions/models.PaginationDTO'
    type: object
  models.PaginationDTO:
    properties:
      last_page:
        type: integer
      limit:
        type: integer
      page:
        type: integer
      total:
        type: integer
    type: object
  models.Review:
    properties:
      body:
        type: string
      book_id:
        type: string
      created_at:
        type: string
      id:
        type: string
      rating:
        type: integer
      title:
        type: string
      updated_at:
        type: string
      user:
        $ref: '#/definitions/models.User'
      user_id:
        type: string
    type: object
  models.Subscription:
    properties:
      auto_renew:
        type: boolean
      can_access_premium:
        type: boolean
      created_at:
        type: string
      currency:
        type: string
      end_date:
        type: string
      id:
        type: string
      max_books:
        type: integer
      max_downloads:
        type: integer
      notes:
        type: string
      payment_id:
        type: string
      plan:
        $ref: '#/definitions/models.SubscriptionPlan'
      price:
        type: number
      start_date:
        type: string
      status:
        $ref: '#/definitions/models.SubscriptionStatus'
      updated_at:
        type: string
      user:
        $ref: '#/definitions/models.User'
      user_id:
        type: string
    type: object
  models.SubscriptionPlan:
    enum:
    - free
    - basic
    - premium
    - student
    type: string
    x-enum-varnames:
    - PlanFree
    - PlanBasic
    - PlanPremium
    - PlanStudent
  models.SubscriptionStatus:
    enum:
    - active
    - expired
    - cancelled
    - pending
    type: string
    x-enum-varnames:
    - SubStatusActive
    - SubStatusExpired
    - SubStatusCancelled
    - SubStatusPending
  models.SuccessResponseDTO:
    properties:
      data: {}
      message:
        type: string
    type: object
  models.UpdateBookDTO:
    properties:
      author:
        type: string
      category_ids:
        items:
          type: string
        type: array
      copies_count:
        minimum: 0
        type: integer
      cover_url:
        type: string
      description:
        type: string
      is_premium:
        type: boolean
      isbn:
        type: string
      language:
        type: string
      page_count:
        type: integer
      publication_year:
        maximum: 9999
        minimum: 0
        type: integer
      publisher:
        type: string
      status:
        $ref: '#/definitions/models.BookStatus'
      title:
        type: string
    type: object
  models.UpdateCollectionDTO:
    properties:
      description:
        type: string
      name:
        type: string
    type: object
  models.UpdateReviewDTO:
    properties:
      body:
        type: string
      rating:
        maximum: 5
        minimum: 1
        type: integer
      title:
        type: string
    type: object
  models.UpdateUserDTO:
    properties:
      group_id:
        type: string
      is_active:
        type: boolean
      name:
        type: string
      role:
        $ref: '#/definitions/models.UserRole'
    type: object
  models.User:
    properties:
      avatar_url:
        type: string
      created_at:
        type: string
      email:
        type: string
      email_verified:
        type: boolean
      group:
        $ref: '#/definitions/models.UserGroup'
      group_id:
        type: string
      id:
        type: string
      is_active:
        type: boolean
      last_login_at:
        type: string
      name:
        type: string
      role:
        $ref: '#/definitions/models.UserRole'
      updated_at:
        type: string
    required:
    - email
    type: object
  models.UserGroup:
    properties:
      allowed_categories:
        items:
          $ref: '#/definitions/models.Category'
        type: array
      can_download:
        type: boolean
      color:
        type: string
      created_at:
        type: string
      description:
        type: string
      id:
        type: string
      is_active:
        type: boolean
      loan_days:
        type: integer
      max_books:
        type: integer
      name:
        type: string
      type:
        $ref: '#/definitions/models.UserGroupType'
      updated_at:
        type: string
    required:
    - name
    - type
    type: object
  models.UserGroupType:
    enum:
    - student
    - free
    - subscriber
    type: string
    x-enum-varnames:
    - GroupTypeStudent
    - GroupTypeFree
    - GroupTypeSubscriber
  models.UserPublicProfileDTO:
    properties:
      collections:
        items:
          $ref: '#/definitions/models.Collection'
        type: array
      follower_count:
        type: integer
      following_count:
        type: integer
      id:
        type: string
      name:
        type: string
      reviews:
        items:
          $ref: '#/definitions/models.Review'
        type: array
    type: object
  models.UserResponseDTO:
    properties:
      avatar_url:
        type: string
      created_at:
        type: string
      email:
        type: string
      email_verified:
        type: boolean
      group:
        $ref: '#/definitions/models.UserGroup'
      group_id:
        type: string
      id:
        type: string
      is_active:
        type: boolean
      name:
        type: string
      role:
        $ref: '#/definitions/models.UserRole'
      subscription:
        $ref: '#/definitions/models.Subscription'
    type: object
  models.UserRole:
    enum:
    - admin
    - librarian
    - reader
    type: string
    x-enum-varnames:
    - RoleAdmin
    - RoleLibrarian
    - RoleReader
host: localhost:8080
info:
  contact:
    email: support@swagger.io
    name: API Support
    url: http://www.swagger.io/support
  description: API for a digital library application, providing functionalities for
    book management, user authentication, and reading features.
  license:
    name: MIT
    url: https://opensource.org/licenses/MIT
  termsOfService: http://swagger.io/terms/
  title: Digital Library API
  version: "2.0"
paths:
  /auth/login:
    post:
      consumes:
      - application/json
      description: Logs in a user with the provided email and password, returning
        a JWT token.
      parameters:
      - description: User login data
        in: body
        name: authRequest
        required: true
        schema:
          $ref: '#/definitions/models.AuthRequestDTO'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/models.AuthResponseDTO'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/models.ErrorResponseDTO'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/models.ErrorResponseDTO'
      summary: Log in a user
      tags:
      - Auth
  /auth/me:
    get:
      description: Retrieves the profile information for the currently authenticated
        user.
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/models.UserResponseDTO'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/models.ErrorResponseDTO'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/models.ErrorResponseDTO'
      security:
      - BearerAuth: []
      summary: Get current user's profile
      tags:
      - Auth
  /auth/register:
    post:
      consumes:
      - application/json
      description: Registers a new user with the provided email and password.
      parameters:
      - description: User registration data
        in: body
        name: authRequest
        required: true
        schema:
          $ref: '#/definitions/models.AuthRequestDTO'
      produces:
      - application/json
      responses:
        "201":
          description: Created
          schema:
            $ref: '#/definitions/models.AuthResponseDTO'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/models.ErrorResponseDTO'
        "409":
          description: Conflict
          schema:
            $ref: '#/definitions/models.ErrorResponseDTO'
      summary: Register a new user
      tags:
      - Auth
  /bookmarks:
    post:
      consumes:
      - application/json
      description: Adds a new bookmark for a book by the authenticated user.
      parameters:
      - description: Bookmark data
        in: body
        name: bookmark
        required: true
        schema:
          $ref: '#/definitions/models.CreateBookmarkDTO'
      produces:
      - application/json
      responses:
        "201":
          description: Created
          schema:
            $ref: '#/definitions/models.Bookmark'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/models.ErrorResponseDTO'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/models.ErrorResponseDTO'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/models.ErrorResponseDTO'
      security:
      - BearerAuth: []
      summary: Create a new bookmark
      tags:
      - Bookmarks
  /bookmarks/{id}:
    delete:
      description: Deletes a bookmark by its ID.
      parameters:
      - description: Bookmark ID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/models.SuccessResponseDTO'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/models.ErrorResponseDTO'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/models.ErrorResponseDTO'
        "403":
          description: Forbidden
          schema:
            $ref: '#/definitions/models.ErrorResponseDTO'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/models.ErrorResponseDTO'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/models.ErrorResponseDTO'
      security:
      - BearerAuth: []
      summary: Delete a bookmark
      tags:
      - Bookmarks
  /bookmarks/book/{book_id}:
    get:
      description: Retrieves all bookmarks for a specific book by the authenticated
        user.
      parameters:
      - description: Book ID
        in: path
        name: book_id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            items:
              $ref: '#/definitions/models.Bookmark'
            type: array
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/models.ErrorResponseDTO'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/models.ErrorResponseDTO'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/models.ErrorResponseDTO'
      security:
      - BearerAuth: []
      summary: Get bookmarks for a book
      tags:
      - Bookmarks
  /books:
    get:
      description: Retrieves a paginated list of all available books.
      parameters:
      - default: 20
        description: Number of books to return
        in: query
        name: limit
        type: integer
      - default: 0
        description: Offset for pagination
        in: query
        name: offset
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/models.SuccessResponseDTO'
            - properties:
                Data:
                  items:
                    $ref: '#/definitions/models.Book'
                  type: array
              type: object
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/models.ErrorResponseDTO'
      summary: Get all books
      tags:
      - Books
    post:
      consumes:
      - application/json
      description: Adds a new book to the library. Librarian access required.
      parameters:
      - description: Book creation data
        in: body
        name: book
        required: true
        schema:
          $ref: '#/definitions/models.CreateBookDTO'
      produces:
      - application/json
      responses:
        "201":
          description: Created
          schema:
            allOf:
            - $ref: '#/definitions/models.SuccessResponseDTO'
            - properties:
                Data:
                  $ref: '#/definitions/models.Book'
              type: object
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/models.ErrorResponseDTO'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/models.ErrorResponseDTO'
        "409":
          description: Conflict
          schema:
            $ref: '#/definitions/models.ErrorResponseDTO'
      security:
      - BearerAuth: []
      summary: Create a new book
      tags:
      - Books
  /books/{id}:
    delete:
      description: Deletes a book from the library. Librarian access required.
      parameters:
      - description: Book ID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/models.SuccessResponseDTO'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/models.ErrorResponseDTO'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/models.ErrorResponseDTO'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/models.ErrorResponseDTO'
      security:
      - BearerAuth: []
      summary: Delete a book
      tags:
      - Books
    get:
      description: Retrieves the details of a specific book by its UUID.
      parameters:
      - description: Book ID
        format: uuid
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/models.Book'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/models.ErrorResponseDTO'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/models.ErrorResponseDTO'
      summary: Get a book by ID
      tags:
      - Books
    put:
      consumes:
      - application/json
      description: Updates the details of a specific book. Librarian access required.
      parameters:
      - description: Book ID
        in: path
        name: id
        required: true
        type: string
      - description: Book data to update
        in: body
        name: book
        required: true
        schema:
          $ref: '#/definitions/models.UpdateBookDTO'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/models.SuccessResponseDTO'
            - properties:
                Data:
                  $ref: '#/definitions/models.Book'
              type: object
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/models.ErrorResponseDTO'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/models.ErrorResponseDTO'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/models.ErrorResponseDTO'
      security:
      - BearerAuth: []
      summary: Update a book
      tags:
      - Books
  /books/{id}/recommendations:
    get:
      description: Retrieves a list of recommended books based on the reading history
        of users who read the specified book.
      parameters:
      - description: Book ID
        in: path
        name: id
        required: true
        type: string
      - default: 10
        description: Limit for recommendations
        in: query
        name: limit
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/models.SuccessResponseDTO'
            - properties:
                Data:
                  items:
                    $ref: '#/definitions/models.Book'
                  type: array
              type: object
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/models.ErrorResponseDTO'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/models.ErrorResponseDTO'
      summary: Get book recommendations
      tags:
      - Books
  /collections:
    get:
      description: Retrieves all collections for the authenticated user.
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            items:
              $ref: '#/definitions/models.Collection'
            type: array
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/models.ErrorResponseDTO'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/models.ErrorResponseDTO'
      security:
      - BearerAuth: []
      summary: Get user's collections
      tags:
      - Collections
    post:
      consumes:
      - application/json
      description: Creates a new collection for the authenticated user.
      parameters:
      - description: Collection data
        in: body
        name: collection
        required: true
        schema:
          $ref: '#/definitions/models.CreateCollectionDTO'
      produces:
      - application/json
      responses:
        "201":
          description: Created
          schema:
            $ref: '#/definitions/models.Collection'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/models.ErrorResponseDTO'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/models.ErrorResponseDTO'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/models.ErrorResponseDTO'
      security:
      - BearerAuth: []
      summary: Create a new collection
      tags:
      - Collections
  /collections/{id}:
    delete:
      description: Deletes a collection by its ID.
      parameters:
      - description: Collection ID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/models.SuccessResponseDTO'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/models.ErrorResponseDTO'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/models.ErrorResponseDTO'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/models.ErrorResponseDTO'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/models.ErrorResponseDTO'
      security:
      - BearerAuth: []
      summary: Delete a collection
      tags:
      - Collections
    get:
      description: Retrieves a single collection by its ID.
      parameters:
      - description: Collection ID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/models.Collection'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/models.ErrorResponseDTO'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/models.ErrorResponseDTO'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/models.ErrorResponseDTO'
      security:
      - BearerAuth: []
      summary: Get a collection by ID
      tags:
      - Collections
    put:
      consumes:
      - application/json
      description: Updates a collection's name and/or description.
      parameters:
      - description: Collection ID
        in: path
        name: id
        required: true
        type: string
      - description: Collection data to update
        in: body
        name: collection
        required: true
        schema:
          $ref: '#/definitions/models.UpdateCollectionDTO'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/models.Collection'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/models.ErrorResponseDTO'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/models.ErrorResponseDTO'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/models.ErrorResponseDTO'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/models.ErrorResponseDTO'
      security:
      - BearerAuth: []
      summary: Update a collection
      tags:
      - Collections
  /collections/{id}/books:
    post:
      consumes:
      - application/json
      description: Adds a specific book to a specific collection.
      parameters:
      - description: Collection ID
        in: path
        name: id
        required: true
        type: string
      - description: Book ID to add
        in: body
        name: book
        required: true
        schema:
          $ref: '#/definitions/models.AddBookToCollectionDTO'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/models.SuccessResponseDTO'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/models.ErrorResponseDTO'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/models.ErrorResponseDTO'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/models.ErrorResponseDTO'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/models.ErrorResponseDTO'
      security:
      - BearerAuth: []
      summary: Add a book to a collection
      tags:
      - Collections
  /collections/{id}/books/{book_id}:
    delete:
      description: Removes a specific book from a specific collection.
      parameters:
      - description: Collection ID
        in: path
        name: id
        required: true
        type: string
      - description: Book ID
        in: path
        name: book_id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/models.SuccessResponseDTO'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/models.ErrorResponseDTO'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/models.ErrorResponseDTO'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/models.ErrorResponseDTO'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/models.ErrorResponseDTO'
      security:
      - BearerAuth: []
      summary: Remove a book from a collection
      tags:
      - Collections
  /reviews:
    post:
      consumes:
      - application/json
      description: Adds a new review for a book by the authenticated user.
      parameters:
      - description: Review data
        in: body
        name: review
        required: true
        schema:
          $ref: '#/definitions/models.CreateReviewDTO'
      produces:
      - application/json
      responses:
        "201":
          description: Created
          schema:
            $ref: '#/definitions/models.Review'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/models.ErrorResponseDTO'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/models.ErrorResponseDTO'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/models.ErrorResponseDTO'
      security:
      - BearerAuth: []
      summary: Create a new review
      tags:
      - Reviews
  /reviews/{id}:
    delete:
      description: Deletes a review by its ID. Can be done by the author or an admin.
      parameters:
      - description: Review ID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/models.SuccessResponseDTO'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/models.ErrorResponseDTO'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/models.ErrorResponseDTO'
        "403":
          description: Forbidden
          schema:
            $ref: '#/definitions/models.ErrorResponseDTO'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/models.ErrorResponseDTO'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/models.ErrorResponseDTO'
      security:
      - BearerAuth: []
      summary: Delete a review
      tags:
      - Reviews
    put:
      consumes:
      - application/json
      description: Updates a review written by the authenticated user.
      parameters:
      - description: Review ID
        in: path
        name: id
        required: true
        type: string
      - description: Review data to update
        in: body
        name: review
        required: true
        schema:
          $ref: '#/definitions/models.UpdateReviewDTO'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/models.Review'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/models.ErrorResponseDTO'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/models.ErrorResponseDTO'
        "403":
          description: Forbidden
          schema:
            $ref: '#/definitions/models.ErrorResponseDTO'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/models.ErrorResponseDTO'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/models.ErrorResponseDTO'
      security:
      - BearerAuth: []
      summary: Update a review
      tags:
      - Reviews
  /reviews/book/{book_id}:
    get:
      description: Retrieves all reviews for a specific book.
      parameters:
      - description: Book ID
        in: path
        name: book_id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            items:
              $ref: '#/definitions/models.Review'
            type: array
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/models.ErrorResponseDTO'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/models.ErrorResponseDTO'
      summary: Get reviews for a book
      tags:
      - Reviews
  /users:
    get:
      description: Get a paginated list of users. Admin access required.
      parameters:
      - description: Limit per page
        in: query
        maximum: 100
        minimum: 1
        name: limit
        type: integer
      - description: Offset for pagination
        in: query
        minimum: 0
        name: offset
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/models.ListResponseDTO'
            - properties:
                Data:
                  items:
                    $ref: '#/definitions/models.UserResponseDTO'
                  type: array
              type: object
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/models.ErrorResponseDTO'
      security:
      - BearerAuth: []
      summary: List users
      tags:
      - Users
  /users/{id}:
    put:
      consumes:
      - application/json
      description: Update user details by their ID. Admin access required.
      parameters:
      - description: User ID
        in: path
        name: id
        required: true
        type: string
      - description: User data to update
        in: body
        name: user
        required: true
        schema:
          $ref: '#/definitions/models.UpdateUserDTO'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/models.UserResponseDTO'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/models.ErrorResponseDTO'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/models.ErrorResponseDTO'
      security:
      - BearerAuth: []
      summary: Update a user by ID
      tags:
      - Users
  /users/{id}/follow:
    delete:
      description: Unsubscribes the authenticated user from another user.
      parameters:
      - description: User ID to unfollow
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/models.SuccessResponseDTO'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/models.ErrorResponseDTO'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/models.ErrorResponseDTO'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/models.ErrorResponseDTO'
      security:
      - BearerAuth: []
      summary: Unfollow a user
      tags:
      - Social
    post:
      description: Subscribes the authenticated user to another user.
      parameters:
      - description: User ID to follow
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/models.SuccessResponseDTO'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/models.ErrorResponseDTO'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/models.ErrorResponseDTO'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/models.ErrorResponseDTO'
      security:
      - BearerAuth: []
      summary: Follow a user
      tags:
      - Social
  /users/{id}/profile:
    get:
      description: Retrieves a user's public profile including follower counts, collections,
        and reviews.
      parameters:
      - description: User ID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/models.UserPublicProfileDTO'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/models.ErrorResponseDTO'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/models.ErrorResponseDTO'
      summary: Get a user's public profile
      tags:
      - Social
  /users/admin:
    post:
      consumes:
      - application/json
      description: Creates a new user with the admin role. Admin access required.
      parameters:
      - description: Admin user data
        in: body
        name: adminRequest
        required: true
        schema:
          $ref: '#/definitions/handlers.CreateAdminRequest'
      produces:
      - application/json
      responses:
        "201":
          description: Created
          schema:
            $ref: '#/definitions/models.UserResponseDTO'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/models.ErrorResponseDTO'
        "409":
          description: Conflict
          schema:
            $ref: '#/definitions/models.ErrorResponseDTO'
      security:
      - BearerAuth: []
      summary: Create a new admin user
      tags:
      - Users
securityDefinitions:
  BearerAuth:
    description: Type "Bearer" followed by a space and a JWT token.
    in: header
    name: Authorization
    type: apiKey
swagger: "2.0"
